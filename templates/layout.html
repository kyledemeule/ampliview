<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">

    <title>Ampliview - Amplify your Reviews</title>
  </head>
  <body>
    <header>
      <div class="collapse bg-dark" id="navbarHeader">
        <div class="container">
          <div class="row">
            <div class="col-sm-8 col-md-7 py-4">
              <h4 class="text-white">About</h4>
              <p class="text-muted">Ampliview is a tool to help you write better reviews for <a href="https://www.yelp.com/" target="_blank">Yelp</a>. It offers two major functions: it will analyze and tag the sentiment of each sentence in your review, and it will provide an overall score for your review on how likely it is to be marked as useful by reviewers on Yelp. Clicks the links on the right to get more information on each of these, or just start writing a review and click analyze!</p>
            </div>
            <div class="col-sm-4 offset-md-1 py-4">
              <h4 class="text-white">Info</h4>
              <ul class="list-unstyled">
                <li><a href="/sentiment" class="text-white">Sentiment Score</a></li>
                <li><a href="/useful-score" class="text-white">Usefulness Score</a></li>
                <li><a href="/samples" class="text-white">Sample Reviews</a></li>
                <li><a href="https://github.com/kyledemeule/ampliview" target="_blank" class="text-white">GitHub Repo</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="navbar navbar-dark bg-dark shadow-sm">
        <div class="container d-flex justify-content-between">
          <a href="/" class="navbar-brand d-flex align-items-center">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-textarea-resize" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M.5 4A2.5 2.5 0 0 1 3 1.5h12A2.5 2.5 0 0 1 17.5 4v8a2.5 2.5 0 0 1-2.5 2.5H3A2.5 2.5 0 0 1 .5 12V4zM3 2.5A1.5 1.5 0 0 0 1.5 4v8A1.5 1.5 0 0 0 3 13.5h12a1.5 1.5 0 0 0 1.5-1.5V4A1.5 1.5 0 0 0 15 2.5H3zm11.854 5.646a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708l3-3a.5.5 0 0 1 .708 0zm0 2.5a.5.5 0 0 1 0 .708l-.5.5a.5.5 0 0 1-.708-.708l.5-.5a.5.5 0 0 1 .708 0z"/></svg>
            <strong> Ampliview</strong>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
      </div>
    </header>
    <main>
      <div id="content" class="container">{% block content %}{% endblock %}</div>
    </main>
    <footer class="text-muted">
      <div class="container">
        <p>Want to see the code? <a href="https://github.com/kyledemeule/ampliview" target="_blank">Visit the GitHub Repo</a> or read the <a href="https://github.com/kyledemeule/ampliview/blob/master/static/pdf/report.pdf/" target="_blank">writeup</a>.</p>
      </div>
    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script>
      var sample_reviews = [
        "I went to Cotto. The pizza was good. They sometimes have specials on pizza or pasta, so you have to look at their website.\n\nThe location is not great though, I couldn't find parking. It's so terrible I almost get into an accident every time.\n\nBut the food is so delicious. I highly recommend it.",
        "Pretty good dinner with a nice selection of food. Open 24 hours and provide nice service. I usually go here after a night of partying. My favorite dish is the Fried Chicken Eggs Benedict.",
        "Good truck stop dining at the right price. We love coming here on the weekends when we don't feel like cooking.",
        "This local BBQ icon was on our list of dining destinations when Santi and I were planning our trip to Madison. Located nearby the airport, the well-lit, wooded interior starts with a pathway that leads to the large overhead menu, the ordering counter, and the dining area. Adding to the d√©cor are the statewide accolades all around the walls. On this evening, the casual atmosphere happened to be unexpectedly subdued, quite unlike the other BBQ restaurants I've visited.   \n\nWe shared a Combination Meal ($17.75) that included our choice of 1/3 Slab, Smoked Pork Shoulder Sandwich, and extra serving of smoked pork shoulder, Cole Slaw, and BBQ Baked Beans. The Slab/Pork Ribs were smoky, tender, and the meat easily peeled off the bones. There was an excellent hint of smoke to deepen its flavor, and that was further enhanced by the BBQ sauce to provide a sweet higher note, strong black peppery secondary, and anchored by a noticeable spicy kick that reverberates with good hops. For the price, there wasn't enough meat on the ribs, but the flavors were still sensational. The dinner roll that this dish came with was sweet, soft, and spongy. I loved it.\n\nThe Pork Shoulder Sandwich was excellent as well. The pork shoulders were tender without one single dry spot--perfectly executed and delicious without the BBQ sauce. The meat was flavorful and deepened by its smoky flavor that coupled perfectly with the well-rounded, full-bodied spicy BBQ sauce. I absolutely loved it except for the buns that turned out flaky with hollow spots and lacking flavor. We finished the meat without getting into the buns very much. This sandwich could have been so much better with a bun of higher quality. \n\nThe BBQ Baked Beans were smooth, sweet, and delicious. The Slaw on the other hand was too wet with a weak texture. Compared to other BBQ joints, their sides could use more varieties such as green beans, collard greens, yam and other possibilities to complement this resounding BBQ. They also have two sauces, and I wished we had the option of trying both at the table.\n\nService was impatient at first, as we were initially tentative and indecisive about our choices. I wished the server could have been much more educational with their strengths and limitations to help us make the right decisions on this very first visit. However, she later became much more warm, accessible, attentive, and helpful towards the middle and end of the meal. Price-wise, their items were pricy with the portions we received. I'd be very interested in coming back to try their Beef Briskets and Chicken Dinner.",
        "It was the 2nd meet up for The International Supper Club and this time Comedor Guadalajara was the place to be!\n\nFrom the outside, you are not quite sure of what are you are getting into, you walk up to the place and you see a huge concrete pad that looks like it's used for outside parties maybe?  You go through the doors and then are shown your table and your mind is thinking how is it possibly this is the same building you were looking at on the outside.  It's huge, and opened, and I didn't even see the entire place. It's well lit and the colorful! A very nice surprise!\n\nWe were a party of 8 and our server was Maria, and she was amazing, she made sure we had everything we needed and more. When you 1st walked in the podium for the hostess says NO SPLIT CHECKS, so our party didn't even ask, we would have figured it out, but when it came time for the check, Maria had already split them up for us.  Love great service!\n\nThe chips are fresh, the salsa, well for me it's perfect! I could have stood it a tab bit hotter, but it had the perfect bit of heat for me, but for a fellow dinner, it was too hot for him.\n\nOrdered a cheese crisp and some guacamole for appetizers and the cheese crisp was just that, a cheese crisp nothing too exciting to write about, but the guacamole, omg it was soo fresh tasting, I loved that stuff!! I think I might have even licked it off my fingers, I'm sure I could have eaten the entire bowl myself  (or did I).\n\nOne of the Wednesday night specials was a poblano pepper stuffed with cheese and topped with green chili sauce with grilled chicken, and it came with beans & rice. OMG AMAZING!!!!!!!!!! I didn't even see it on the menu but damn I want it again! The pepper was fresh, the green sauce was delish, and the grilled chicken just tied this dish together! The beans and rice were perfectly cooked. AMAZING!!!!\n\nMy meal filled me up pretty well, but I did order a churro, and it was the perfect way to end a great meal. Love churros!!! Warm pastry stick covered in cinnamon and sugar. Oh yea I went home a happy girl for sure!",
        "If you like lot lizards, you'll love the Pine Cone!"
      ];

      function analyze_review() {
        var review_text = $("#review-text").val();
        $('#review-analysis').html("Loading...");
        $('#useful-prediction').html("");
        analyze_button_loading();

        var posting = $.post("analyze", { review_text: review_text } );
        posting.done(function( data ) {
          if (data.review_html) {
            $('#review-analysis').html(data.review_html);
            $('#useful-prediction').html(data.progress_html);
            $('[data-toggle="tooltip"]').tooltip();
            $('[data-toggle="popover"]').popover();
          } else {
            $('#review-analysis').html("<p>No review found.</p><p>Try a <a href='/' id='default-sample-review'>sample review.</a></p>");
            $('#useful-prediction').html("");
          }
        });
        posting.fail(function( data ) {
            $('#review-analysis').html("There was an error analyzing the review.");
            $('#useful-prediction').html("");
        });
        posting.always(function( data ) {
            analyze_button_enable();
        });
      }

      function analyze_button_loading() {
        $('#analyze-button').prop('disabled', true);
        $('#analyze-button').html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>Loading...');
      }

      function analyze_button_enable() {
        $('#analyze-button').html("Analyze");
        $('#analyze-button').prop('disabled', false);
      }

      function fill_sample_review(sample_review_index) {
        if(Array.isArray(sample_reviews) && sample_review_index < sample_reviews.length) {
          $('#review-text').val(sample_reviews[sample_review_index]);
        }
        analyze_review();
      }

      $(document).ready(function() {
          $("#analyze-button").click(function() {
            analyze_review();
          });

          $('body').on('click', '#default-sample-review', function(event) {
            event.preventDefault();
            fill_sample_review(0);
          });
          $('[data-toggle="popover"]').popover();

          var searchParams = new URLSearchParams(window.location.search);
          if (searchParams.get("r")) {
            fill_sample_review(searchParams.get("r"));
            window.history.replaceState({}, document.title, "/");
          } else {
            analyze_review();
          }
      });
    </script>
  </body>
</html>